<!doctype html>
<html>
  <head>
    <title>Caped mud client</title>
    <meta charset="UTF-8">
  <style>
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }
    body { 
      font: 13px Helvetica, Arial; 
    }
    form { 
      background: white; 
      padding: 3px; 
      position: fixed; 
      bottom: 0; 
      width: 100%; 
    }

    form input { 
      border: 0; 
      padding: 10px; 
      width: 90%; 
      margin-right: .5%; 
    }

    form button { 
      width: 9%; background: rgb(130, 224, 255); border: none; padding: 10px; 
    }

    #messages { 
      list-style-type: none; margin: 0; padding: 0; 
      color: #004d00;
    }

    #messages li { 
      padding: 5px 10px;
      background: black;
    }

    #messages li:nth-child(odd) { 
      background: black; 
    }

    #messages { 
      margin-bottom: 40px; 
      width: 100%;
      height: 100%;
      }    
    .output {
      width: 100%;
      height: 600px;
      overflow-x: hidden;
      overflow-y: scroll;
      padding: 10px;
      height: 200px;
      font-family: DroidSansMono;
      font-size: 14px;
      line-height: 16px;
      white-space: pre-wrap;
      color: black;
      background-color: white;
    }    

  </style>
  </head>
  <body>
    <ul id="messages" class= "output"></ul>
    <form action="">
      <input id="m" autocomplete="off" /><button>Send</button>
    </form>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      $( () => {
        // Send messages:
        const socket = io();
        $('form').submit(() => {
          socket.emit('command', $('#m').val());
         // $('#m').val('');
          $('#m').select();
          return false;
        });
        socket.on('command', (msg) => {
          $('#messages').append($('<li>').text(msg));
          window.scrollTo(0, document.body.scrollHeight);
        });
        // Receive messages from server:
        socket.on('message', (message) => {
          
          const command = message.command;
          const data = message.data;
          
          $('#messages').append($('<li>').text(data));
          window.scrollTo(0, document.body.scrollHeight);
        })
      });
    </script>
  </body>
</html>
